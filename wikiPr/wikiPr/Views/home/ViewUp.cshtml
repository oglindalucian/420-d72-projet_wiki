@*@model wikiPr.Models.Language*@
@*@model wikiPr.Models.Utilisateur*@
@using wikiPr.Models

@{ 
    string str = "";
    string inscription = "Inscription";
    string connexion = "Connexion";
    string accueil = "Accueil";
    string ajouterarticle = "Ajouter article";
    string apropos = "À propos";
    string profil = "Profil";
    string deconnexion = "Déconnexion";
    string bonjour = "Bonjour";
    string langue = "Langue";
    string francais = "Francais";
    string anglais = "Anglais";
    string espagnol = "Espagnol";
    // string lang = Language.language;

    try {
        str = Request.ServerVariables["HTTP_ACCEPT_LANGUAGE"];
        Utilisateur u = Utilisateurs.FindByCourriel(User.Identity.Name);
        if (User.Identity.IsAuthenticated && u != null) { str = u.Langue; }
        //else if (Request.Form["langue"]=="fr") { str = "fr"; }
        //else if (Request.Form["langue"] == "en") { str = "en"; }
        //else if (Request.Form["langue"] == "es") { str = "es"; }
        //if (fr.isSelected)
        // else if (lg != null) { str = lg; }
        //   if (lang!=null) { str = lang; }
        if (!User.Identity.IsAuthenticated) {
            Utilisateur ut = new Utilisateur(-1);
            string l = ut.Langue;
            if (l != "" && l != null) { str = l; }

        }
    }
    catch { str = "fr"; }

    if (str.IndexOf("fr") != -1) {
        inscription = "Inscription";
        connexion = "Connexion";
        accueil = "Accueil";
        ajouterarticle = "Ajouter article";
        apropos = "À propos";
        profil = "Profil";
        deconnexion = "Déconnexion";
        bonjour = "Bonjour";
        francais = "Francais";
        anglais = "Anglais";
        espagnol = "Espagnol";
        langue = "Langue";
    }

    if (str.IndexOf("en") != -1) {
        inscription = "Sign up";
        connexion = "Sign in";
        accueil = "Home";
        ajouterarticle = "Add article";
        apropos = "About";
        profil = "Profile";
        deconnexion = "Log out";
        bonjour = "Hello";
        francais = "French";
        anglais = "English";
        espagnol = "Spanish";
        langue = "Language";
    }

    if (str.IndexOf("es") != -1) {
        inscription = "Regístrate";
        connexion = "Conexión";
        accueil = "Recepción";
        ajouterarticle = "Añadir artículo";
        apropos = "A proposito";
        profil = "Perfil";
        deconnexion = "Cerrar sesión";
        bonjour = "Hola";
        francais = "Francés";
        anglais = "Inglés";
        espagnol = "Español";
        langue = "Lengua";
    }
}


<br />
<div class="btn_accueil">
    <a class="btn" href="/home/index">@accueil</a>
</div>
<div class="btn_ajouter">
    <a class="btn" href="/home/ajouter">@ajouterarticle</a>
</div>
<div class="btn_apropos">
    <a class="btn" href="/home/apropos">@apropos</a>
</div>
<div id="btn_langue">
    
        @*<select id="lang">
            <option value="" selected>@langue</option>
            <option value="fr" name="fr">@francais</option>
            <option value="en" name="en">@anglais</option>
            <option value="es" name="es">@espagnol</option>
        </select>

    <script>
        var x = document.getElementById("lang");
        var lg = x.options[x.selectedIndex].value;       
    </script>*@

    @*<form action="">
        @Html.DropDownList("Langue", new List<SelectListItem> {
                new SelectListItem {Text=@langue, Value="", Selected=true},
                new SelectListItem {Text=@francais, Value="fr"},
                new SelectListItem {Text=@espagnol, Value="es"},
                new SelectListItem {Text=@anglais, Value="en"} })
        <input type="submit" value="go" />
    </form>*@  
    
    @*@Html.ActionLink(@francais, "LangFr", "home") 
    @Html.ActionLink(@anglais, "LangEn", "home")
    @Html.ActionLink(@espagnol, "LangEs", "home")*@

   @Html.Action("ViewLang", "home") 
       
</div>
@if (!User.Identity.IsAuthenticated) {
    <div class="inscription">
        <a href="/Utilisateurs/Inscription">@inscription</a>
    </div>
    <div class="connexion">
        <a href="/Utilisateurs/Connexion">@connexion</a>
    </div>
}
else if (User.Identity.IsAuthenticated) {
    <div class="inscription">
        <a href="/Utilisateurs/Profil">@profil</a>
    </div>
    <div class="connexion">
        <a href="/Utilisateurs/Logout">@deconnexion</a>
    </div>
    <div class="bonjour">@bonjour @User.Identity.Name!</div>
}
