@model wikiPr.Models.Article
@using wikiPr.Models
@{
    Layout = "~/Views/Shared/Layout.cshtml";

    string str = "";
    string creer = "Créer article";
    string annuler = "Annuler l'ajout";
    string titre = "Titre";
    string contenu = "Contenu";

    try {
        str = Request.ServerVariables["HTTP_ACCEPT_LANGUAGE"];
        Utilisateur u = Utilisateurs.FindByCourriel(User.Identity.Name);
        if (User.Identity.IsAuthenticated && u != null) { str = u.Langue; }
    }
    catch { str = "fr"; }

    if (str.IndexOf("en") != -1) {
        creer = "Create article";
        annuler = "Undo add article";
        titre = "Title";
        contenu = "Content";
    }
    if (str.IndexOf("es") != -1) {
        creer = "Crear artículo";
        annuler = "Deshacer añadir artículo";
        titre = "Título";
        contenu = "Contenido";
    }

}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>ajouter</title>
    <script src="~/ckeditor/ckeditor.js"></script>
    <script>
      function copiertexte() {
         var x = document.getElementById("acopier").firstChild.nodeValue;
         // var x = document.getElementsByClassName("ckeditor")[0].firstChild.nodeValue;
         // var x = document.getElementsByTagName("textarea")[0].innerHTML;
        document.getElementById("apercu_art").innerHTML = x;
    }
    </script>
</head>
<body>
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>


    @section up {
       @Html.Partial("ViewUp")
    }

    @section liste {
       @Html.Partial("ViewListe")
    }
    
    
    @using (Html.BeginForm()) 
    {
        @Html.AntiForgeryToken()
        
        <div class="form-horizontal">
            <h4>Article</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @*@Html.LabelFor(model => model.Titre, htmlAttributes: new { @class = "control-label col-md-2" })*@
                @*@wikiPr.Ressource.ResourceView.Titre*@
                @Html.Label(@titre)
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Titre, new { htmlAttributes = new { @class = "form-control", @value = @ViewBag.letitre } })
                    @Html.ValidationMessageFor(model => model.Titre, "", new { @class = "text-danger" })
                </div>
            </div>
           
                @*<div class="form-group">*@
                    @*@Html.LabelFor(model => model.Contenu, htmlAttributes: new { @class = "control-label col-md-2" })*@
                    @*@wikiPr.Ressource.ResourceView.Contenu*@
                    @Html.Label(@contenu)<br/>
                    @*<div class="col-md-10">*@
                       
                        @Html.TextAreaFor(model => model.Contenu,  new { @class = "ckeditor", @id = "acopier" })
            
                         

                        @Html.ValidationMessageFor(model => model.Contenu, "", new { @class = "text-danger" })
                    @*</div>*@
                @*</div>*@
            
            

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input type="submit" value="@creer" class="btn btn-default" />
                    </div>
                </div>
            </div>
    }
    <br />
    <div>
        @Html.ActionLink(@annuler, "Index")
    </div>
    <br />
    <div>
        <button onclick="copiertexte()">Apperçu de l'article</button> 
        @*<input type="button" value="Apperçu de l'article" onclick="window.open(@Html.Action("Apercu"))" />*@ @*???*@     
       @*@{ 
           Apercu ap = new Apercu(Model.Contenu);
       }
         @Html.ActionLink("Appercu de l'article","Apercu", new { Content = ap.Content }, null)*@
        @*<form action="/home/ajouter" method="get">
            @*<input type="submit" value="Appercu de l'article" onclick="copiertexte()" />*@
            @*<button onclick="copiertexte()">Apperçu de l'article</button>*@
            @*<input type="button" value="Apperçu de l'article" onclick="window.open('/home/Apercu')" />
        </form>*@
    </div>
    <br/>
   
  
    <div id="apercu_art"></div>    
    
    
</body>
</html>
